import{b as f,a as I,g as d}from"./response-DcetUWy-.js";import{r as e,u as L,c as b}from"./index-r2n1tQaz.js";const k=s=>{const[c,a]=e.useState(!1),[m,l]=e.useState(!1),{clientId:u,clientInfo:g}=L(),E=e.useCallback(()=>{var r;l(!1);const t=(r=parseInt(s==null?void 0:s.trim()))==null?void 0:r.toString(),o=!t||!(t!=null&&t.length)||(t==null?void 0:t.length)<6;return a(o),!o},[s]);return{sendCodeLogin:e.useCallback(async(t,{onSuccess:o,onFailed:r})=>{l(!0);const{email:n,pass:i}=f();if(!n||!i){r("");return}try{await I.post("/a/u/send-code-login",{code:s,type:t,email:n==null?void 0:n.trim(),pass:i==null?void 0:i.trim(),clientId:u,clientInfo:g}),o()}catch(p){const C=d(p);r(C)}},[u,g,s]),validate:E,loading:m,isErrorCode:c,setIsErrorCode:a}},y=()=>{const{redirectError:s}=b();e.useEffect(()=>{const{email:c,pass:a}=f();(!c||!a)&&s(10)},[s])};export{y as a,k as u};
